<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Navigating</title>
		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
<link rel="stylesheet" href="dist/theme/white.css" id="theme">
		<!-- Theme used for syntax highlighted code -->
<link rel="stylesheet" href="plugin/highlight/github.min.css" id="highlight-theme"></head>
	<body>
		<div class="reveal">
			<div class="slides">
<section data-markdown  ><textarea data-template>
[comment]: # "markdown: { smartypants: true }"

### Navigating

# Node.js

#### in 2022

<small>a (very opinionated) beginner's guide</small>

</textarea></section>
<section data-markdown  ><textarea data-template>

![](https://coolaj86.com/assets/media/coolaj86-2017.jpg)

AJ ONeal <br> [@\_beyondcode](https://twitter.com/@_beyondcode) <br>
[twitch.tv/coolaj86](https://twitch.tv/coolaj86)

</textarea></section>
<section data-markdown  ><textarea data-template>

Technophobic Technologist

Dangerous Wrong Thinker

Equal Opportunity Offender

</textarea></section>
<section data-markdown  ><textarea data-template>

<img title="node.js: official logo" src="https://nodejs.org/static/images/logos/nodejs-new-pantone-black.svg" width="60%" />

https://nodejs.org/en/about/resources/

</textarea></section>
<section data-markdown  ><textarea data-template>

<img title="node.js: an absolute dumpster fire" src="https://i.imgur.com/OlolkHa.png" width=70% />

</textarea></section>
<section data-markdown  ><textarea data-template>

!["node.js: too many cooks"](https://i.imgur.com/GIKXLBA.png)

</textarea></section>
<section data-markdown  ><textarea data-template>

!["classical learning curves"](https://i.imgur.com/RT2rUfV.png)

</textarea></section>
<section data-markdown  ><textarea data-template>

1. Why Node.js?
2. Install
3. Tools
4. Hello World
5. Web Server

</textarea></section>
<section data-markdown  ><textarea data-template>

When there's _great_ options out there...

</textarea></section>
<section data-markdown  ><textarea data-template>

<img title="Go: logo" src="https://user-images.githubusercontent.com/727262/40395108-6bcc327a-5e1e-11e8-9f76-3917983b8563.png" width="30%"/><img src="https://raw.githubusercontent.com/keygx/Go-gopher-Vector/fe01b920482f9ab2c6ec7d1928c3c617341e3841/svg/gopher03c.svg" title="Golang Gopher" width="20%" />

<small><a href="https://go.dev/blog/go-brand">https://go.dev/blog/go-brand</a><br><a href="https://go.dev/blog/gopher">https://go.dev/blog/gopher</a></small>

</textarea></section>
<section data-markdown  ><textarea data-template>

![](https://www.rust-lang.org/logos/rust-logo-256x256-blk.png)
<img title="happy ferris" src="https://rustacean.net/assets/rustacean-flat-happy.png" width="30%"/>

<small><a href="https://github.com/rust-lang/rust/issues/11562">https://github.com/rust-lang/rust/issues/11562</a><br><a href="https://rustacean.net/">https://rustacean.net/</a></small>

</textarea></section>
<section data-markdown  ><textarea data-template>

# 1. Why Node.js?

</textarea></section>
<section data-markdown  ><textarea data-template>

> "You're not paid to (ab)use _every_ feature of a language.
>
> You're paid to write _correct_ programs."

~ Douglas Crockford

</textarea></section>
<section data-markdown  ><textarea data-template>

### It is _possible_

### to be

# good

### at JavaScript

</textarea></section>
<section data-markdown  ><textarea data-template>

> "Perfection is achieved not when there is nothing more to add,
> but when there is nothing left to take away"

~ Antoine de Saint-Exupery

</textarea></section>
<section data-markdown  ><textarea data-template>

# less

### is

# more

</textarea></section>
<section data-markdown  ><textarea data-template>

# Benefits

</textarea></section>
<section data-markdown  ><textarea data-template>

-   **Single-Threaded Execution** \
    (no data races, like Rust) <br>

</textarea></section>
<section data-markdown  ><textarea data-template>

-   **Event-Oriented** \
    (high concurrency, like Go) <br>

</textarea></section>
<section data-markdown  ><textarea data-template>

-   **Modern ALL-the-THINGS** \
    (functional, duck-typed, pure-objects)

</textarea></section>
<section data-markdown  ><textarea data-template>

It's great for web services.

```js
let server = express();
let app = Router();

server.use("/", app);

Http.createServer(server).listen(3000);
```

<small><a href="https://www.npmjs.com/package/@root/async-router">https://www.npmjs.com/package/@root/async-router</a></small>

</textarea></section>
<section data-markdown  ><textarea data-template>

And quite usable for command line utilities.

```js
let { $, question, sleep } = await import("zx");

await $`ls -lah`;
```

<small><a href="https://github.com/google/zx">https://github.com/google/zx</a></small>

</textarea></section>
<section data-markdown  ><textarea data-template>

...

</textarea></section>
<section data-markdown  ><textarea data-template>

it's there

<small>a lot</small>

</textarea></section>
<section data-markdown  ><textarea data-template>

# Demerits

</textarea></section>
<section data-markdown  ><textarea data-template>

-   **Too Much Legacy** \
    (dumpster fire) <br>

</textarea></section>
<section data-markdown  ><textarea data-template>

-   **No Cohesion** \
    (too many cooks) <br>

</textarea></section>
<section data-markdown  ><textarea data-template>

...

</textarea></section>
<section data-markdown  ><textarea data-template>

-   **Really, REALLY Bad Docs** \
    (80/20 gone wrong)

</textarea></section>
<section data-markdown  ><textarea data-template>

Hold my MtnDew...

<img title="AJ with pink heart sunglasses" src="https://i.imgur.com/HPCzpnY.png" width="50%" />

</textarea></section>
<section data-markdown  ><textarea data-template>

# 2. Install

</textarea></section>
<section data-markdown  ><textarea data-template>

<img title="node.js ALL downloads" src="https://i.imgur.com/2Jw7pPc.png" width="80%" />

</textarea></section>
<section data-markdown  ><textarea data-template>

<img title="node.js BAD downloads" src="https://i.imgur.com/2kQ1Cne.png" width="80%" />

</textarea></section>
<section data-markdown  ><textarea data-template>

## `sudo`

<img title="sudo make me a sandwich" src="https://imgs.xkcd.com/comics/sandwich.png" width="37%" />

is _NOT_ your friend

</textarea></section>
<section data-markdown  ><textarea data-template>

<img title="node.js good downloads" src="https://i.imgur.com/AgWKZFu.png" width="80%" />

</textarea></section>
<section data-markdown  ><textarea data-template>

## `PATH`

is _NOT_ your friend

</textarea></section>
<section data-markdown  ><textarea data-template>

(and neither is `brew`)

</textarea></section>
<section data-markdown  ><textarea data-template>

`webi` is your friend

![](https://i.imgur.com/tlLp3NN.png)

</textarea></section>
<section data-markdown  ><textarea data-template>

<img title="node.js good downloads" src="https://i.imgur.com/AgWKZFu.png" width="80%" />

</textarea></section>
<section data-markdown  ><textarea data-template>

-   fastest (download)
-   fastest (setup)
-   conflict-free

</textarea></section>
<section data-markdown  ><textarea data-template>

and easy to remember

```sh
curl "https://webinstall.dev" | bash

webi node@lts
```

</textarea></section>
<section data-markdown  ><textarea data-template>

`+` cheat sheet

```bash
webi node@latest
```

```js
let Http = require("http");

let app = function (req, res) {
    res.end("Hello, World!");
};

Http.createServer(app).listen(8080, function () {
    console.info("Listening on", this.address());
});
```

</textarea></section>
<section data-markdown  ><textarea data-template>

# 3. Tools

</textarea></section>
<section data-markdown  ><textarea data-template>

Your brain is small.

</textarea></section>
<section data-markdown  ><textarea data-template>

And you suck at code.

</textarea></section>
<section data-markdown  ><textarea data-template>

(because you are human)

</textarea></section>
<section data-markdown  ><textarea data-template>

...

</textarea></section>
<section data-markdown  ><textarea data-template>

> "11 out of 10 dentists agree:
> typing is the leading cause of typos"

~ ADA

</textarea></section>
<section data-markdown  ><textarea data-template>

# Tools

0. vim-essentials
1. prettier
2. jshint (or eslint)
3. jsdoc
4. tsc

</textarea></section>
<section data-markdown  ><textarea data-template>

## vim-essentials

```bash
webi vim-essenntials
```

<https://webinstall.dev/vim-essentials>

</textarea></section>
<section data-markdown  ><textarea data-template>

## vim

learn how to use the computer already

</textarea></section>
<section data-markdown  ><textarea data-template>

(are you back-end or not?)

</textarea></section>
<section data-markdown  ><textarea data-template>

## VS Code

an acceptable alternative

</textarea></section>
<section data-markdown  ><textarea data-template>

### Spot Check

How beginner are we?

</textarea></section>
<section data-markdown  ><textarea data-template>

-   functions
-   events
-   primitives
-   variables
-   Promises
-   RegExp

</textarea></section>
<section data-markdown  ><textarea data-template>

-   require
-   process
-   module scope
-   Fs
-   Buffer

</textarea></section>
<section data-markdown  ><textarea data-template>

## Prettier

<https://prettier.io/docs/en/rationale.html>

</textarea></section>
<section data-markdown  ><textarea data-template>

0 BS

</textarea></section>
<section data-markdown  ><textarea data-template>

## Prettier

```bash
webi prettier
```

```bash
npm install -g prettier
```

</textarea></section>
<section data-markdown  ><textarea data-template>

## Prettier

`package.json`:

```bash
{
    "scripts": {
        "prettier": "npx prettier@2.x -w '**/*.{md,js,html,css}'"
    }
}
```

```bash
npm run prettier
```

</textarea></section>
<section data-markdown  ><textarea data-template>

## jshint

<https://jshint.com/about/>

</textarea></section>
<section data-markdown  ><textarea data-template>

> "jslint has taught me more than I ever taught it"

~ Douglas Crockford

</textarea></section>
<section data-markdown  ><textarea data-template>

## jshint

```bash
webi jshint
```

```bash
npm install -g jshint
```

</textarea></section>
<section data-markdown  ><textarea data-template>

## jshint

`package.json`:

```json
{
    "scripts": {
        "lint": "npx jshint@2.x -c ./.jshintrc *.js */*.js"
    }
}
```

```bash
npm run lint
```

</textarea></section>
<section data-markdown  ><textarea data-template>

## vs eslint

also good, but not as simple

</textarea></section>
<section data-markdown  ><textarea data-template>

## jsdoc

```bash
npm install -g jsdoc
```

(for type hinting)

</textarea></section>
<section data-markdown  ><textarea data-template>

## jsdoc

```js
/**
 * Starts the important thing with the stuff
 * @namespace Service
 * @param {Object} opts - all of the options
 * @param {String} opts.units - either 'meters' or 'feet'
 * @returns {Promise<Number>} - the process id
 */
Service.start = async function (opts) {
    // ...
};
```

</textarea></section>
<section data-markdown  ><textarea data-template>

## jsdoc

`package.json`:

```json
{
    "scripts": {
        "doc": "npx jsdoc@3.x --configure ./jsdoc.conf.json --destination ./docs --package ./package.json --readme ./README.md --access all --private --recurse ./index.js ./lib/"
    }
}
```

```bash
npm run doc
```

</textarea></section>
<section data-markdown  ><textarea data-template>

## tsc

```bash
npm install -g typescript
```

(for type hinting)

</textarea></section>
<section data-markdown  ><textarea data-template>

```js
let answer = "Hello, World!";

answer = 42;
// ❌ number is not a string
```

</textarea></section>
<section data-markdown  ><textarea data-template>

```js
let Widget = require("widget");

Widget.getGizmo();
// ❌ did you mean getGadget()?
```

</textarea></section>
<section data-markdown  ><textarea data-template>

<img title="type hinting in javascript" src="https://user-images.githubusercontent.com/122831/130662033-d730d789-93b3-44b3-87fd-360b1168a634.jpg" width="80%" />

<small><a href="https://github.com/BeyondCodeBootcamp/jsdoc-typescript-starter">https://github.com/BeyondCodeBootcamp/jsdoc-typescript-starter</a></small>

</textarea></section>
<section data-markdown  ><textarea data-template>

# et cetera

<https://webinstall.dev/>

</textarea></section>
<section data-markdown  ><textarea data-template>

## Why not Co-Pilot?

<img title="octo-co-pilot" src="https://i.imgur.com/Gm8JRzH.png" width="60%" />

</textarea></section>
<section data-markdown  ><textarea data-template>

# 🚽

</textarea></section>
<section data-markdown  ><textarea data-template>

<small>(you'll write enough bad code all on your own)</small>

</textarea></section>
<section data-markdown  ><textarea data-template>

## 4. Hello World

```js
console.info("Hello, World!");
```

</textarea></section>
<section data-markdown  ><textarea data-template>

<small>(console.log is for burning)</small>

</textarea></section>
<section data-markdown  ><textarea data-template>

A better hello world...

-   a useful function
-   a unit test
-   an export
-   an import
-   a package

</textarea></section>
<section data-markdown  ><textarea data-template>

```js
function greet(person) {
    return `Hello, ${person.name}!`;
}
```

❌ not useful

</textarea></section>
<section data-markdown  ><textarea data-template>

`messenger.js`

```js
"use strict";

let Messenger = module.exports;
```

</textarea></section>
<section data-markdown  ><textarea data-template>

`module`

`module.exports`

</textarea></section>
<section data-markdown  ><textarea data-template>

(🤯 don't overwrite `module.exports`!)

</textarea></section>
<section data-markdown  ><textarea data-template>

```js
Messenger.parseEmails = function (text) {
    let emailRe = /[\w\.+-]+@[a-z][0-9a-z-\.]+[a-z]/gi;

    let emails = {};
    for (;;) {
        let m = emailRe.exec(text);
        if (!m) {
            break;
        }
        let email = m[0].toLowerCase();
        emails[email] = true;
    }

    return Object.keys(emails);
};
```

just trust me...

</textarea></section>
<section data-markdown  ><textarea data-template>

```js
regexp.exec;
```

```js
for (;;)
```

```js
Object.keys;
```

</textarea></section>
<section data-markdown  ><textarea data-template>

Some sample input...

```txt
Hello, my email is coolaj86@gmail.com.
I like long messages from walks@beach.co
coolaj86+node.js@gmail.com is an alias of mine.
```

</textarea></section>
<section data-markdown  ><textarea data-template>

A little self-test...

```js
if (require.main === module) {
    let Assert = require("assert");

    let text = `
        Hello, my email is coolaj86@gmail.com.
        I like long messages from walks@beach.co
    `;
    let expected =
        "coolaj86@gmail.com,walks@beach.co,coolaj86+node.js@gmail.com";

    let emails = Messenger.parseEmails(text).join(",");
    Assert.equal(expected, emails);

    console.info("Pass"); // ✅ "Pass"
}
```

</textarea></section>
<section data-markdown  ><textarea data-template>

```js
require;
```

```js
require.main;
```

```js
Assert;
```

</textarea></section>
<section data-markdown  ><textarea data-template>

how to use in multiple files?

</textarea></section>
<section data-markdown  ><textarea data-template>

`bin/parse-emails.js`

```js
#!/usr/bin/env node

"use strict";

let Messenger = require("./messenger.js");
let text = process.argv.slice(2).join(" ");

let emails = Messenger.parseEmails(text);

emails.forEach(function (email) {
    console.info(email);
});
```

```bash
chmod a+x bin/parse-emails.js
ln -s parse-emails.js bin/parse-emails
```

</textarea></section>
<section data-markdown  ><textarea data-template>

```js
#!/usr/bin/env node
```

```js
chmod;
```

```js
ln - s;
```

</textarea></section>
<section data-markdown  ><textarea data-template>

How to share with others?

</textarea></section>
<section data-markdown  ><textarea data-template>

## npm

<img title="getting started with npm" src="https://i.imgur.com/ZTwFsAL.png" width="80%" />

<small><a href="https://i.imgur.com/ZTwFsAL.png">https://gist.github.com/coolaj86/1318304</a></small>

</textarea></section>
<section data-markdown  ><textarea data-template>

```bash
npm config set init.author.email "you@example.com"
```

```bash
npm adduser
```

```bash
npm publish --access=public @YOUR_NAME/messenger
```

</textarea></section>
<section data-markdown  ><textarea data-template>

## 5. SaaS-ify

</textarea></section>
<section data-markdown  ><textarea data-template>

`server.js`

```js
let Http = require("http");

let httpServer = require("http").createServer(app);

httpServer.listen(3000, function () {
    console.info("Listening on", httpServer.address());
});
```

</textarea></section>
<section data-markdown  ><textarea data-template>

```js
function app(req, res) {
    let text = "";
    req.on("readable", function () {
        for (;;) {
            let chunk = req.read()?.toString("utf8");
            if (!chunk) {
                break;
            }
            text += chunk;
        }
    });
    req.on("end", function () {
        let emails = Messenger.parseEmails(text).join(",");
        res.end(emails);
    });
});
```

</textarea></section>
<section data-markdown  ><textarea data-template>

```js
Http.createServer(app);
```

```js
req.on("readable");
```

</textarea></section>
<section data-markdown  ><textarea data-template>

```bash
npm run start
```

</textarea></section>
<section data-markdown  ><textarea data-template>

# Bonus Round

</textarea></section>
<section data-markdown  ><textarea data-template>

## telebit

<img title="telebit explainer" src="https://i.imgur.com/nCx70uV.png" width="80%" />

</textarea></section>
<section data-markdown  ><textarea data-template>

## caddy + duckdns

```caddy
example.duckdns.org {
    tls {
        dns duckdns xxxxxxxx-xxxx-4xxx-8xxx-xxxxxxxxxxxx
    }

    log {
        output stdout
        format console
    }

    reverse_proxy /api/* localhost:3000

    root * /srv/example.com/public/
    file_server
}
```

</textarea></section>
<section data-markdown ><textarea data-template>

> "if you use all of your intelligence to build the most complex thing you can, given there's a defect in there, by definition it's more complex than you can understand"

~ [Darryl Spencer](https://www.youtube.com/watch?v=OYMk4Zws-jE&t=3732s)
~ [Darryl Spencer](https://www.youtube.com/watch?v=OYMk4Zws-jE&t=3732s)
</textarea></section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script src="plugin/math/math.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
Reveal.initialize({
controls : false,
markdown : {smartypants: true},
controls : false,
keyboard : true,
hash : false,
respondToHashChanges : false,
				hash: true,
				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealMath ]
			});
		</script>
	</body>
</html>
